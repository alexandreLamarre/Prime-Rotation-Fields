(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(4),s=n.n(i),o=(n(12),n(13),n(1)),c=n(2),l=n(6),u=n(5),h=n(14),m=function(){function t(e){Object(o.a)(this,t),h(e.length===e[0].length),this.container=e}return Object(c.a)(t,[{key:"lMultiply",value:function(t){h(t.length===this.container.length,"vector "+t.toString()+"vector dimension "+t.length.toString()+"versus matrix "+this.container.toString()+"of dimension "+this.container.length);for(var e=[],n=0;n<t.length;n++){for(var a=0,r=0;r<t.length;r++)a+=t[r]*this.container[r][n];e.push(a)}return e}},{key:"rMultiply",value:function(t){h(t.length===this.container.length,"vector "+t.toString()+"vector dimension "+t.length.toString()+"versus matrix "+this.container.toString()+"of dimension "+this.container.length);for(var e=[],n=0;n<t.length;n++){for(var a=0,r=0;r<t.length;r++)a+=this.container[n][r]*t[r];e.push(a)}return e}},{key:"matrixMultiply",value:function(t){h(t.container.length===this.container.length,"matrix "+this.container.toString()+" other matrix "+t.container.toString());for(var e=[],n=0;n<this.container.length;n++){for(var a=[],r=0;r<this.container.length;r++){var i=g(this.getRow(n),t.getColumn(r));a.push(i)}e.push(a)}return e}},{key:"getMatrix",value:function(){return this.container}},{key:"getRow",value:function(t){h(t<this.container.length,"matrix dimension "+this.container.length.toString()+", access index "+t.toString());for(var e=[],n=0;n<this.container.length;n++)e.push(this.container[t][n]);return e}},{key:"getColumn",value:function(t){h(t<this.container.length,"matrix dimension "+this.container.length.toString()+", access index "+t.toString());for(var e=[],n=0;n<this.container.length;n++)e.push(this.container[n][t]);return e}}]),t}();function g(t,e){for(var n=0,a=0;a<t.length;a++)n+=t[a]*e[a];return n}function v(t,e,n){var a=new m([[Math.cos(t),-Math.sin(t)],[Math.sin(t),Math.cos(t)]]),r=[n[0]-e[0],n[1]-e[1]],i=a.rMultiply(r);return i[0]+=e[0],i[1]+=e[1],i}n(20);var f=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={height:0,width:0,centerX:0,centerY:0,running:!1,num_primes:500,primes:[],points:[],degree:90,scale:1,dragging:!1,mouseX:0,mouseY:0,offsetX:0,offsetY:0,colored:!1},a.canvas=r.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=.6*window.innerWidth,e=.6*window.innerHeight;this.setState({width:t,height:e,centerX:t/2,centerY:e/2})}},{key:"componentDidUpdate",value:function(){this.canvas.current.width=this.state.width,this.canvas.current.height=this.state.height;var t=this.canvas.current.getContext("2d");t.scale(this.state.scale,this.state.scale);for(var e=this.state.points,n=255/e.length,a=this.state.colored,r=0;r<e.length-1;r++){var i=e[r][0],s=e[r][1];t.beginPath(),t.moveTo(i[0]+this.state.offsetX,i[1]+this.state.offsetY),t.lineTo(s[0]+this.state.offsetX,s[1]+this.state.offsetY),t.strokeStyle=!0===a?"rgb("+parseInt(255-n*r).toString()+",0,0)":"rgb(0,0,0)",t.globalAlpha=1,t.stroke(),t.closePath()}}},{key:"setPrimeTarget",value:function(t){var e=parseInt(t.target.value);this.setState({num_primes:e})}},{key:"setDegree",value:function(t){var e=parseFloat(t.target.value);this.setState({degree:e})}},{key:"setColored",value:function(t){var e=this.state.colored;this.setState({colored:!e})}},{key:"createPrimeList",value:function(){return function(t){for(var e=[],n=0;n<t;n++)e.push(!0);for(var a=2;a<t;a++)if(!0===e[a-1])for(var r=Math.pow(a,2);r<t;r+=a)e[r-1]=!1;for(var i=[],s=0;s<e.length;s++)!0===e[s]&&s!==e.length-1&&i.push(s+1);return i}(this.state.num_primes)}},{key:"drawPrimeRotation",value:function(){var t=this.createPrimeList(this.state.num_primes),e=this.state.degree,n=this.state.centerX,a=this.state.centerY;this.canvas.current.width=this.state.width,this.canvas.current.height=this.state.height;this.canvas.current.getContext("2d");for(var r=0,i=[n,a],s=[n,a],o=[],c=0;c<t.length;c++){i=s;var l=void 0===t[c-1]?t[c]:t[c]-t[c-1];s=[i[0]+l,i[1]],s=v(Math.PI*r/180,i,s),r+=e,r%=360,o.push([i,s])}this.setState({points:o,primes:t})}},{key:"zoomCamera",value:function(t){var e=this.state.scale,n=.05*-Math.sign(t.deltaY);this.setState({scale:e+n})}},{key:"resetCamera",value:function(){this.setState({scale:1,offsetX:0,offsetY:0})}},{key:"setDrag",value:function(t,e){this.setState({dragging:e})}},{key:"updateCamera",value:function(t){var e=this.state.mouseX,n=this.state.mouseY;if(!0===this.state.dragging){var a=this.canvas.current.getBoundingClientRect(),r=t.clientX-a.left,i=t.clientY-a.top,s=this.state.offsetX+(r-e),o=this.state.offsetY+(i-n);this.setState({mouseX:r,mouseY:i,offsetX:s,offsetY:o})}else{var c=this.canvas.current.getBoundingClientRect(),l=t.clientX-c.left,u=t.clientY-c.top;this.setState({mouseX:l,mouseY:u})}}},{key:"saveAs",value:function(t){var e=this.canvas.current.toDataURL("primes/"+t),n=document.createElement("a");n.href=e,n.download="primes."+t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("canvas",{className:"primeCanvas",onWheel:function(e){return t.zoomCamera(e)},onMouseLeave:function(e){return t.setDrag(e,!1)},onMouseMove:function(e){return t.updateCamera(e)},onMouseDown:function(e){return t.setDrag(e,!0)},onMouseUp:function(e){return t.setDrag(e,!1)},ref:this.canvas,style:{height:this.state.height,width:this.state.width}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"slider",type:"range",onChange:function(e){return t.setPrimeTarget(e)},min:"500",step:"1",value:this.state.num_primes,max:"1000000"}),r.a.createElement("br",null),r.a.createElement("label",null," Primes up to: ",this.state.num_primes,"  "),r.a.createElement("br",null),r.a.createElement("input",{className:"slider",type:"range",min:"0.5",max:"359.5",step:"0.5",value:this.state.degree,onChange:function(e){return t.setDegree(e)}}),r.a.createElement("br",null),r.a.createElement("label",null," Rotation: ",this.state.degree," degrees  "),r.a.createElement("br",null),r.a.createElement("label",null," Color :  "),r.a.createElement("input",{onChange:function(e){return t.setColored(e)},type:"checkbox"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return t.drawPrimeRotation()}}," Prime Rotation "),r.a.createElement("button",{onClick:function(){return t.resetCamera()}},"Reset Camera"),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"saveB",title:"Save as"},"Save as"),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("a",{className:"aFile",onClick:function(){return t.saveAs("png")}},".png"),r.a.createElement("a",{className:"aFile",onClick:function(){return t.saveAs("jpg")}},".jpg"))))}}]),n}(r.a.Component);var d=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},7:function(t,e,n){t.exports=n(21)}},[[7,1,2]]]);
//# sourceMappingURL=main.5904525c.chunk.js.map